!function(e){function n(){var e=document.querySelector(".microphone .workbench__button");e&&e.addEventListener("click",t)}function t(){yaCounter22714219.reachGoal("microphone"),o()}function o(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({audio:!0,video:!1},r,m):v()}function r(e){function n(){t(),C?o():r(),requestAnimationFrame(n)}function t(){S.clearRect(0,0,b,p)}function o(){g.getByteTimeDomainData(v),S.strokeStyle="white",S.lineWidth=2,S.beginPath();for(var e=0;e<f;e++){var n=u(e),t=h(v[e])*p;0===e?S.moveTo(n,t):S.lineTo(n,t)}S.stroke()}function r(){g.getByteFrequencyData(v),S.fillStyle="white";for(var e=0;e<f;e++)m(u(e),h(v[e]))}function u(e){return e*(w+1)}function h(e){return e/256}function m(e,n){var t=Math.round(p*n),o=p-t;l(e,o,w,t)}function l(e,n,t,o){S.fillRect(e,n,t,o)}var f,v,w,_=new(window.AudioContext||window.webkitAudioContext),k=_.createMediaStreamSource(e),g=_.createAnalyser(),L=_.createGain(),E=d(),y=a(),M=s(),C=!1,S=E.getContext("2d");c([E,y,M]),i(),y.addEventListener("click",function(e){L.gain.value?(L.gain.value=0,e.target.classList.remove("microphone-workbench__button--switched")):(L.gain.value=1,e.target.classList.add("microphone-workbench__button--switched"))}),M.addEventListener("click",function(e){C?(C=!1,g.fftSize=512,e.target.classList.remove("microphone-workbench__button--switched")):(C=!0,g.fftSize=2048,e.target.classList.add("microphone-workbench__button--switched"))}),k.connect(g),g.fftSize=512,g.connect(L),g.minDecibels=-90,g.smoothingTimeConstant=.75,L.gain.value=0,L.connect(_.destination),f=g.frequencyBinCount,v=new Uint8Array(f),w=b/f,n()}function i(){document.querySelector(".microphone-workbench__container").classList.add("microphone-workbench__container--visible")}function c(n){var t=document.createElement("div");t.classList.add("microphone-workbench__wrapper");var o=document.createElement("div");o.classList.add("microphone-workbench__status"),o.innerHTML=e("microphone.success"),t.appendChild(o),n.forEach(function(e){t.appendChild(e)}),u(t)}function a(){var e=document.createElement("button");return e.classList.add("microphone-workbench__button"),e.classList.add("microphone-workbench__button--mute"),e}function s(){var e=document.createElement("button");return e.classList.add("microphone-workbench__button"),e.classList.add("microphone-workbench__button--mode"),e}function d(){var e=document.createElement("canvas");return e.width=b,e.height=p,e.classList.add("microphone-workbench__canvas"),e}function u(e){var n=h();n.innerHTML="",n.appendChild(e)}function h(){return document.querySelector(".microphone .workbench .container")}function m(e){switch(e.name){case"PermissionDeniedError":l();break;case"DevicesNotFoundError":case"NotFoundError":f();break;default:w(e.name,e.name)}}function l(){w(e("error.access"),e("error.access.description"))}function f(){w(e("microphone.error.devices"),e("microphone.error.devices.description"))}function v(){w(e("error.browser"),e("error.browser.description"))}function w(e,n){var t=document.createElement("div"),o=document.createElement("h3"),r=document.createElement("div");t.classList.add("workbench-error"),o.classList.add("workbench-error__title"),o.innerHTML=e,r.classList.add("workbench-error__description"),r.innerHTML=n,t.appendChild(o),t.appendChild(r),u(t)}var b=768,p=245;n()}(window.__);